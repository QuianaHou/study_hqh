# 前端学习

​	create by hqh 2018-01-09

## app热更新

* 概念及必要性

  APP发布后，发现严重bug需要进行紧急修复，就要重新打包、测试、向各个应用市场或渠道换包，重点是还会有本来的版本遗留

## js绑定事件

* addEventListener绑定事件时，第二个参数可以为对象，会自动寻找这个对象中的handleEvent，通过判断事件类型，触发相应的方法

  ```js
  var obj = {
  	handleEvent : function(event) {
        switch(event.type) {
          case 'touchstart':
          case 'pointerdown':
          case 'mousedown':
            this._start(event);
            break;
           case 'touchmove'：
           case 'pointermove':
           case 'mousemove':
            this._move(event);
            break;
           case 'touchend':
           case 'pointerup':
           case 'mouseup':
           	this._end(event);
           	break;
        };
        _start : function(event){}
        _move : function(event){}
        _end : functin(event){}
  	}
  	ele.addEventListener(type, obj, false)
  ```

## 修改安卓手机墙纸

```js
function setwallpaper(){
    var WallpaperManager = plus.android.importClass("android.app.WallpaperManager");
    var Main = plus.android.runtimeMainActivity();
    var wallpaperManager = WallpaperManager.getInstance(Main);
    plus.android.importClass(wallpaperManager);
    var BitmapFactory = plus.android.importClass("android.graphics.BitmapFactory");
    var url="img/img_1.png";  // 换成要设置的壁纸图片路径
    var path=plus.io.convertLocalFileSystemURL(url);
    var bitmap = BitmapFactory.decodeFile(path);
    try{
        wallpaperManager.setBitmap(bitmap);
        bitmap.recycle(); // 设置完毕桌面要进行 原生层的BITMAP回收 减少内存压力
    }catch(e){
        //TODO handle the exception
    }
}
```

* 注意事项

  条用此功能需在`manifest.json`文件中。切换到 **模块权限配置** ，选中`android.permission.SET_WALLPAPER` 权限

